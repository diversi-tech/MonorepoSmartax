<router-outlet></router-outlet>
<input type="text" pInputText placeholder="חיפוש לפי שם לקוח" (input)="filterByClient($event.target.value)" />


<p-table [value]="sortedReports" [tableStyle]="{ 'max-width': '50rem' }">
    <ng-template pTemplate="header">
        <tr>
            <th></th>
            <th>סטטוס</th>
            <th>ישות</th>
            <th>עובד מטפל</th>
            <th pSortableColumn="balanceDue">
                :יתרה לתשלום <p-sortIcon field="balanceDue" />
            </th>
            <th pSortableColumn="paymentAmountPaid">
                :סכום ששולם <p-sortIcon field="paymentAmountPaid" />
            </th>
            <th pSortableColumn="price">
                :מחיר <p-sortIcon field="price" />
            </th>
            <th>תאריך יצירה</th>
            <th pSortableColumn="yearReport">
                :שנה <p-sortIcon field="yearReport" />
            </th>
            <th pSortableColumn="name" >
            </th>
         
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-task>
        <tr>
            <td><p-button (click)="goToSteps(getClientName(task.idUser), task)" label="עדכן" /></td>
            <td>{{task.status}}</td>
            <td>{{task.entityType}}</td>
            <td>{{getEmployeName(task.idEmploye)?.userName }}</td>
            <td>{{ task.balanceDue }}</td>
            <td>{{ task.paymentAmountPaid }}</td>
            <td>{{ task.price }}</td>
            <td>{{ task.dateTime | date:'dd/MM/yyyy' }}</td>
            <td>{{ task.yearReport }}</td>
            <td>{{getClientName(task.idUser)?.firstName }} {{getClientName(task.idUser)?.lastName }}</td>
            <app-icon-profile [userName]="getClientName(task.idUser)?.firstName  &&  getClientName(task.idUser)?.lastName" style="width: 50px;"></app-icon-profile>
        
        </tr>
    </ng-template>
</p-table>
